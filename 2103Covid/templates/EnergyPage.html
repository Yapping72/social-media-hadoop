<!DOCTYPE html><html lang="en"><head> <meta charset="utf-8" />
    <title>Data Visualization Demo in Flask, Leaflet and ChartJS</title>
   <!-- import plugin script --> 
       <link href="../static/css/bootstrap.min.css" rel="stylesheet">
       <link href="../static/css/jumbotron-narrow.css" rel="stylesheet">
       <link rel="stylesheet" type="text/css" href="{{url_for('static', filename='css/home.css')}}">
       <script src="../static/js/jquery-1.11.2.js"></script>
       <script src="../static/js/Chart.min.js"></script>
        <script src="../static/js/main.js"></script>
        <script>
            var data = {{data|tojson}};

        </script>
       <script src="https://cdn.anychart.com/releases/8.11.0/js/anychart-base.min.js"></script>
	    <script src="https://cdn.anychart.com/releases/8.11.0/js/anychart-tag-cloud.min.js"></script>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
       <meta charset="utf-8">
       <meta name="viewport" content="width=device-width, initial-scale=1">
       <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
       <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
       <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
       <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js" type="application/javascript"></script>
       <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    </head>
    <body> 
        <div class="container-fluid text-center">
          <div class="row">
            <div class="col-sm-12 col-md-10 col-lg-8 mx-auto">
              <div class="container-fluid" style="margin-right: 500px;">
    
                <div class="col-sm-9">
                  <div class="well" style="width: 2000px;">
                    <h2>Energy Sector Companies</h2>
                    
                    <br>
                    <div class="row">
                    </div>
                  </div>
                </div>
    
                <div class="col-sm-9">
                  <div class="well" style="width: 2000px;">
                    <h2>WordCloud</h2><br>
                    <div class="row">
                      <div class="col-sm-6">
                       INSERT summarised wordcloud for the industry
                      </div>
                      <div class="col-sm-6">
                       
                      </div>
                    </div>
                  </div>
                </div>
      
                <div class="col-sm-9">
                    <div class="well" style="width: 2000px;">
                      <h2>Choose Company to display statistics </h2>
                  
                      <select class="form-select" id="company-dropdown" aria-label="Company Select">
                        {% for company in companies %}
                          <option value="{{ company }}">{{ company }}</option>
                        {% endfor %}
                      </select>
                  
                      <div id="company-div" style="display:none;">
                          <div class="col-sm-9">
                              <div class="well" style="width: 900px;">
                                <h2 id="div-title">Total Star Reviews for Energy Sector</h2><br>
                                <div class="row">
                                  <div class="col-sm-6">
                                    <h3>1 star Reviews</h3>
                                    <p id="1-star" style="font-size: x-large; color:rgb(230, 31, 31);"data-start="2100">{{totalonestar}}</p>
                                    <h3>2 star reviews</h3>
                                    <p id="2-star" style="font-size: x-large; color:rgb(228, 44, 44);"data-start="2800">{{totaltwostar}}</p>
                                    <h3>3 star Reviews</h3>
                                    <p id="3-star" style="font-size: x-large; color:rgb(54, 6, 248);"data-start="7080">{{totalthreestar}}</p>
                                    <h3>4 star reviews</h3>
                                    <p id="4-star" style="font-size: x-large; color:rgb(23, 166, 47);"data-start="10700">{{totalfourstar}}</p>
                                    <h3>5 star reviews</h3>
                                    <p id="5-star" style="font-size: x-large; color:rgb(42, 174, 81);"data-start="8500">{{totalfivestar}}</p>
                                  </div>
                                  <div class="col-sm-6">
                                    One Star - Five Star Reviews in percentage
                                    <canvas id="myChart"></canvas>
                                    <div style="margin-top: 90px;">
                                  </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                      </div>
                  
                    </div>
                  </div>
                  


                  
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </body>
    
  
  <div class="pagination">
    
    
   
  </div>
      
      
  </div>
  
        </div>
            </div>
  </div>
  
  
  
  
      <script>





  var ctx = document.getElementById("myChart").getContext('2d');
  var myChart = new Chart(ctx, {
    type: 'pie',
    data: {
      labels: ["1 Star reviews", "2 Star reviews", "3 Star reviews", "4 Star reviews","5 Star reviews "],
      datasets: [{
        backgroundColor: [
          "#2ecc71",
          "#3498db",
          "#95a5a6",
          "#9b59b6",
          "#f1c40f",
          "#e74c3c",
          "#34495e"
        ],
           data: [
          ({{totalonestar}}/{{totalreviews}}*100).toFixed(2),
          ({{totaltwostar}}/{{totalreviews}}*100).toFixed(2),
          ({{totalthreestar}}/{{totalreviews}}*100).toFixed(2),
          ({{totalfourstar}}/{{totalreviews}}*100).toFixed(2),
          ({{totalfivestar}}/{{totalreviews}}*100).toFixed(2)
        ]
      }]
    }
  });
  
  
  $(document).ready(function() {
    try {
        $('#company-dropdown').on('change', function() {
            console.log('Selected value:', $(this).val());
            if ($(this).val() == 'Apache') {
                $('#apache-div').show();
            } else {
                $('#apache-div').hide();
            }
        });
    } catch (error) {
        console.error('Error:', error);
    }
});
  
  
  
  
  
  $(function() {
      function count($this){
          var current = parseInt($this.html());
          $this.html(++current);
          if(current !== $this.data('count')){
              setTimeout(function(){count($this)}, 1); // decrease timeout value to make it faster
          }
      }        
      $("p").each(function() {
          $(this).data('count', parseInt($(this).text(), 10));
          $(this).html($(this).data('start'));
          count($(this));
      });
  });
  
  $('.count').each(function () {
      var start = $(this).data('start');
      var end = $(this).text();
      var duration = 500; // decrease duration value to make it faster
      var range = end - start;
      var step = Math.ceil(range / (duration / 16)); // 16 is the interval in milliseconds between each step, you can adjust it if needed
      $(this).prop('Counter', start).animate({
          Counter: end
      }, {
          duration: duration,
          easing: 'swing',
          step: function (now) {
              $(this).text(Math.ceil(now));
          }
      });
  });
  
 


  
  
  
  
  
  </script>
  
      
  
   </body>
   </html>